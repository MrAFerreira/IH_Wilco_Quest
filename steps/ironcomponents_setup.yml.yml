id: iron_components_setup
learningObjectives:
  - Setting up the styled-components library
hints:
  - Make sure that you are wrapping the application with the ThemeProvider
startFlow:
  do:
    - actionId: bot_message
      params:
        person: keen
        messages:
          - text: "Looks like we need to update the way we're doing our CSS for the application. It would be a good idea to start using the styled-components library and have some CSS on JS action. Install the package in the application and try to do the initial setup."
            delay: 2000
          - text: "Here's the [documentation](https://styled-components.com/docs). For now just set up the Theme Provider with a theme variable on index.js so that later we can use some styles everywhere troughout the application. For now that theme variable can be an empty object."
            delay: 3500
githubActions:
  frontend:
    capabilities:
      - jest-puppeteer
      - puppeteer
    testFile: 'theme_setup.test.js'
trigger:
  type: github_pr_lifecycle_status
  flowNode:
    switch:
      key: '${eventType}'
      cases:
        github_pr_opened:
          do:
            - actionId: bot_message
              params:
                person: keen
                messages:
                  - text: "On it, I'll review the changes right away."
                    delay: 1000
            - actionId: github_pr_comment
              params:
                person: keen
                message: "On it, I'll review the changes right away."
        github_pr_workflow_complete_success:
          do:
            - actionId: bot_message
              params:
                person: keen
                messages:
                  - text: 'Nailed it! Excellent job @${user.githubuser}! You can now merge the PR.'
                    delay: 2000
            - actionId: github_pr_approve
              params:
                person: keen
                message: 'Nailed it! Excellent job @${user.githubuser}! You can now merge the PR.'
        github_pr_workflow_complete_failure:
          do:
            - actionId: bot_message
              params:
                person: keen
                messages:
                  - text: 'Make sure your fix passes all the checks, then try again please.'
                    delay: 3000
            - actionId: github_pr_reject
              params:
                person: keen
                message: "It doesn't seem that the ThemeProvider is setup correctly. Can you take a closer look?"
        github_pr_merged:
          do:
            - actionId: finish_step
